/*!
 * ihavecookies - jQuery plugin for displaying cookie/privacy message
 * v0.3.2
 *
 * Copyright (c) 2018 Ketan Mistry (https://iamketan.com.au)
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/mit-license.php
 *
 * - Updated so that the settings reflects the already set preferences.
 * - Added button to reopen the cookie preferences
 *   Kim Steinhaug / kim@steinhaug.com 
 * 
 */
!function(p){p.fn.ihavecookies=function(e){var o=p(this),t=p.extend({forceDisplayPanel:!1,fixedCookieTypeLabel:"Necessary",fixedCookieTypeDesc:"These are essential for the website to work correctly.",cookieTypes:[{type:"Site Preferences",value:"preferences",description:"These are cookies that are related to your site preferences, e.g. remembering your username, site colours, etc."},{type:"Analytics",value:"analytics",description:"Cookies related to site visits, browser types, etc."},{type:"Marketing",value:"marketing",description:"Cookies related to marketing, e.g. newsletters, social media, etc"}],title:"&#x1F36A; Implied Consent: Cookies info",message:"We are using and have set cookies, but you can switch them off if you want.",link:"/privacy-policy",moreInfoLabel:"More information",delay:600,expires:30,acceptBtnLabel:"Accept Cookies",advancedBtnLabel:"Customise Cookies",cookieTypesTitle:"Select cookies to accept",uncheckBoxes:!1,onAccept:function(){p.fn.ihavecookies.preference("analytics")}},e),i=l("cookieControl"),c=l("cookieControlPrefs");if(i&&c&&!t.forceDisplayPanel){var n=!0;"false"==i&&(n=!1),s(n,t.expires)}else{i=l("cookieControl");var r='<li><input type="checkbox" name="gdpr[]" value="necessary" checked="checked" disabled="disabled"> <label title="'+t.fixedCookieTypeDesc+'">'+t.fixedCookieTypeLabel+"</label></li>";p.each(t.cookieTypes,function(e,o){if(""!==o.type&&""!==o.value){var i="";!1!==o.description&&(i=' title="'+o.description+'"'),r+='<li><input type="checkbox" id="gdpr-cookietype-'+o.value+'" name="gdpr[]" value="'+o.value+'" data-auto="on"> <label for="gdpr-cookietype-'+o.value+'"'+i+">"+o.type+"</label></li>"}});var a='<div id="gdpr-cookie-message"><h4>'+t.title+"</h4><p>"+t.message+' <a href="'+t.link+'">'+t.moreInfoLabel+'</a><div id="gdpr-cookie-types" style="display:none;"><h5>'+t.cookieTypesTitle+"</h5><ul>"+r+'</ul></div><p><button id="gdpr-cookie-advanced" type="button">'+t.advancedBtnLabel+'</button><button id="gdpr-cookie-accept" type="button">'+t.acceptBtnLabel+"</button></p></div>";setTimeout(function(){p(o).append(a),p("#gdpr-cookie-message").hide().fadeIn("slow")},t.delay),p("body").on("click","#gdpr-cookie-accept",function(){s(!0,t.expires),c?(p('input[name="gdpr[]"][data-auto="on"]').prop("checked",!1),"on"==p("#gdpr-cookietype-marketing").data("auto")&&!0===p.fn.ihavecookies.preference("marketing")&&p("#gdpr-cookietype-marketing").prop("checked",!0),"on"==p("#gdpr-cookietype-preferences").data("auto")&&!0===p.fn.ihavecookies.preference("preferences")&&p("#gdpr-cookietype-preferences").prop("checked",!0),"on"==p("#gdpr-cookietype-analytics").data("auto")&&!0===p.fn.ihavecookies.preference("analytics")&&p("#gdpr-cookietype-analytics").prop("checked",!0)):p('input[name="gdpr[]"][data-auto="on"]').prop("checked",!0);var i=[];p.each(p('input[name="gdpr[]"]').serializeArray(),function(e,o){i.push(o.value)}),d("cookieControlPrefs",JSON.stringify(i),365),t.onAccept.call(this)}),p("body").on("click","#gdpr-cookie-advanced",function(){p('input[name="gdpr[]"]:not(:disabled)').attr("data-auto","off").prop("checked",!1),!0===p.fn.ihavecookies.preference("marketing")&&p("#gdpr-cookietype-marketing").prop("checked",!0),!0===p.fn.ihavecookies.preference("preferences")&&p("#gdpr-cookietype-preferences").prop("checked",!0),!0===p.fn.ihavecookies.preference("analytics")&&p("#gdpr-cookietype-analytics").prop("checked",!0),p("#gdpr-cookie-types").slideDown("fast",function(){p("#gdpr-cookie-advanced").prop("disabled",!0)})})}!0===t.uncheckBoxes&&p('input[type="checkbox"].ihavecookies').prop("checked",!1)},p.fn.ihavecookies.cookie=function(){var e=l("cookieControlPrefs");return JSON.parse(e)},p.fn.ihavecookies.preference=function(e){var o=l("cookieControl"),i=l("cookieControlPrefs");return i=JSON.parse(i),!1!==o&&(!1!==i&&-1!==i.indexOf(e))};var s=function(e,o){d("cookieControl",e,o),p("#gdpr-cookie-message").fadeOut("fast",function(){p(this).remove()})},d=function(e,o,i){var t=new Date;t.setTime(t.getTime()+24*i*60*60*1e3);var c="expires="+t.toUTCString();return document.cookie=e+"="+o+";"+c+";path=/",l(e)},l=function(e){for(var o=e+"=",i=decodeURIComponent(document.cookie).split(";"),t=0;t<i.length;t++){for(var c=i[t];" "==c.charAt(0);)c=c.substring(1);if(0===c.indexOf(o))return c.substring(o.length,c.length)}return!1}}(jQuery);
